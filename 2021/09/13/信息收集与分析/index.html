<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="渗透测试,">










<meta name="description" content="前言昨天晚上被通知过两天要参与演练，没经验，突击一下，熟悉一下流程 信息收集大家都说，渗透测试是否成功，很大程度上取决于信息收集">
<meta name="keywords" content="渗透测试">
<meta property="og:type" content="article">
<meta property="og:title" content="信息收集与分析">
<meta property="og:url" content="http://yoursite.com/2021/09/13/信息收集与分析/index.html">
<meta property="og:site_name" content="Glarcy">
<meta property="og:description" content="前言昨天晚上被通知过两天要参与演练，没经验，突击一下，熟悉一下流程 信息收集大家都说，渗透测试是否成功，很大程度上取决于信息收集">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/img/message/1.png">
<meta property="og:image" content="http://yoursite.com/img/message/2.png">
<meta property="og:image" content="http://yoursite.com/img/message/3.png">
<meta property="og:image" content="http://yoursite.com/img/message/4.png">
<meta property="og:image" content="http://yoursite.com/img/message/5.png">
<meta property="og:image" content="http://yoursite.com/img/message/6.png">
<meta property="og:image" content="http://yoursite.com/img/message/7.png">
<meta property="og:image" content="http://yoursite.com/img/message/8.png">
<meta property="og:image" content="http://yoursite.com/img/message/9.png">
<meta property="og:image" content="http://yoursite.com/img/message/10.png">
<meta property="og:image" content="http://yoursite.com/img/message/11.png">
<meta property="og:image" content="http://yoursite.com/img/message/12.png">
<meta property="og:image" content="http://yoursite.com/img/message/13.png">
<meta property="og:image" content="http://yoursite.com/img/message/15.jpg">
<meta property="og:image" content="http://yoursite.com/img/message/14.jpg">
<meta property="og:image" content="http://yoursite.com/img/message/16.jpg">
<meta property="og:image" content="http://yoursite.com/img/message/17.png">
<meta property="og:image" content="http://yoursite.com/img/message/18.png">
<meta property="og:image" content="http://yoursite.com/img/message/19.png">
<meta property="og:updated_time" content="2022-04-13T07:08:45.642Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="信息收集与分析">
<meta name="twitter:description" content="前言昨天晚上被通知过两天要参与演练，没经验，突击一下，熟悉一下流程 信息收集大家都说，渗透测试是否成功，很大程度上取决于信息收集">
<meta name="twitter:image" content="http://yoursite.com/img/message/1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2021/09/13/信息收集与分析/">





  <title>信息收集与分析 | Glarcy</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Glarcy</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-首页">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-关于">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-标签">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-分类">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-归档">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/09/13/信息收集与分析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Glarcy">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Glarcy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">信息收集与分析</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-09-13T14:11:39+08:00">
                2021-09-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>昨天晚上被通知过两天要参与演练，没经验，突击一下，熟悉一下流程</p>
<h4 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h4><p>大家都说，渗透测试是否成功，很大程度上取决于信息收集</p>
<a id="more"></a>

<p>信息收集是指通过各种方式获取所需要的信息，分为<strong>主动收集</strong>和<strong>被动收集</strong></p>
<p><strong>被动收集</strong>：不直接与目标接触，通过搜索引擎、威胁情报、社工库等进行，收集的是网络上目标的有关信息并不会直接访问目标</p>
<p><strong>主动收集</strong>：与目标系统直接接触，使用受控主机基于扫描器、测试工具等进行探测，无法避免留下访问的痕迹</p>
<p>那要收集什么呢？最简单的比如说目标站点的IP、中间件、脚本语言、端口等等。</p>
<h4 id="收集域名信息"><a href="#收集域名信息" class="headerlink" title="收集域名信息"></a>收集域名信息</h4><h5 id="Whois查询"><a href="#Whois查询" class="headerlink" title="Whois查询"></a>Whois查询</h5><p>Whois 是用来查询域名的IP以及所有者等信息的传输协议。简单来说，就是一个用来查询域名是否已经被注册，以及注册域名的详细信息的数据库（如域名所有人、域名注册日期等）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whois jd.com</span><br></pre></td></tr></table></figure>

<p><img src="../../../../img/message/1.png" alt></p>
<p>如何使用？</p>
<p>Kali下自带whois查询  </p>
<p>此外还有在线网址：</p>
<p><a href="https://whois.chinaz.com/" target="_blank" rel="noopener">https://whois.chinaz.com/</a></p>
<p><a href="https://whois.aizhan.com/" target="_blank" rel="noopener">https://whois.aizhan.com/</a></p>
<p><a href="https://site.ip138.com/" target="_blank" rel="noopener">https://site.ip138.com/</a></p>
<p><a href="http://whois.xinnet.com/" target="_blank" rel="noopener">http://whois.xinnet.com/</a></p>
<p>但要注意的是，得到的结果是域名托管商，查询信息有限</p>
<p>当遇到查询时域名被屏蔽或者不支持查询，可多换几个接口尝试</p>
<h5 id="备案信息查询"><a href="#备案信息查询" class="headerlink" title="备案信息查询"></a>备案信息查询</h5><p>ICP备案查询网 <a href="http://www.beianbeian.com/" target="_blank" rel="noopener">http://www.beianbeian.com/</a></p>
<p>国内网站注册需要向国家有关部门申请备案，防止网站从事非法活动，而国外网站不需要备案，通过查询备案信息可以获得域名的单位信息，从而找到更多的网络资产</p>
<p><img src="../../../../img/message/2.png" alt></p>
<h5 id="子域名信息收集"><a href="#子域名信息收集" class="headerlink" title="子域名信息收集"></a>子域名信息收集</h5><p>子域名也就是主域名下的域名。假设我们的目标网络规模比较大，直接从主域入手显然是很不理智的，因为对于这种规模的目标，一般其主域都是重点防护区域。通过子域名可以让我们发现目标更多的资产和服务，更容易找到薄弱点</p>
<p><strong>在线平台</strong></p>
<p>ip138  <a href="https://site.ip138.com/" target="_blank" rel="noopener">https://site.ip138.com/</a></p>
<p>站长工具  <a href="http://tool.chinaz.com/subdomain/?domain=" target="_blank" rel="noopener">http://tool.chinaz.com/subdomain/?domain=</a></p>
<p>hackertarget  <a href="https://hackertarget.com/find-dns-host-records/" target="_blank" rel="noopener">https://hackertarget.com/find-dns-host-records/</a></p>
<p>phpinfo  <a href="https://phpinfo.me/domain/" target="_blank" rel="noopener">https://phpinfo.me/domain/</a></p>
<p>t1h2ua  <a href="https://www.t1h2ua.cn/tools/" target="_blank" rel="noopener">https://www.t1h2ua.cn/tools/</a></p>
<p>dnsdumpster  <a href="https://dnsdumpster.com/" target="_blank" rel="noopener">https://dnsdumpster.com/</a></p>
<p>chinacycc  <a href="https://d.chinacycc.com/" target="_blank" rel="noopener">https://d.chinacycc.com/</a></p>
<p>zcjun   <a href="http://z.zcjun.com/" target="_blank" rel="noopener">http://z.zcjun.com/</a></p>
<p><strong>搜索引擎</strong></p>
<p>Google语法查询</p>
<p>例如：搜索子域名 “site:xxxxx”</p>
<p><img src="../../../../img/message/3.png" alt></p>
<p><strong>FOFA</strong>语法查询：<a href="https://fofa.so/" target="_blank" rel="noopener">https://fofa.so/</a></p>
<p>例如：搜索子域名 “domain:xxxxx”</p>
<p><img src="../../../../img/message/4.png" alt></p>
<p><strong>工具枚举</strong></p>
<p>一些常用子域名工具：</p>
<p><strong>OneForAll</strong></p>
<p>一款功能强大的子域收集工具，拥有多个模块和接口扫描，收集子域信息很全，包括子域、子域IP、子域常用端口、子域Title、子域Banner、子域状态等</p>
<p>使用方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 oneforall.py --target example.com run</span><br></pre></td></tr></table></figure>

<p><strong>Sublist3r</strong></p>
<p>也是一个比较常用的工具， 它能列举多种资源，如在Google、Yahoo、 Bing、 Baidu和Ask等搜索引擎中可查到的子域名，还可以列出Netcraft、VirusTotal、ThreatCrowd、 DNSdumpster、SSL Certificates、和Reverse DNS查到的子域名</p>
<p><strong>Layer子域名挖掘机</strong></p>
<p>Layer子域名挖掘机的使用方法比较简单，在域名对话框中直接输入域名就可以进行扫描，它的显示界面比较细致，有域名、解析IP、开放端口、Web服务器和网站状态等</p>
<p><strong>subDomainsBrute</strong></p>
<p>特点是可以用小字典递归地发现三级域名、四级域名,甚至五级域名等不容易被探测到的域名</p>
<p>使用方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python subDomainsBrute.py target.com</span><br></pre></td></tr></table></figure>

<p><img src="../../../../img/message/5.png" alt></p>
<p><strong>第三方接口</strong></p>
<p>第三方服务汇聚了大量的dns数据集，可以检索某个给定域名的子域名信息</p>
<p><a href="https://dnsdumpster.com/" target="_blank" rel="noopener">https://dnsdumpster.com/</a></p>
<p><img src="../../../../img/message/6.png" alt></p>
<p><a href="https://www.virustotal.com/" target="_blank" rel="noopener">https://www.virustotal.com/</a></p>
<p><img src="../../../../img/message/7.png" alt></p>
<p>此外还有很多工具，K8、wydomain、dnsbrute、Findomain、fierce等，可自行探索</p>
<p><strong>证书透明度公开日志</strong></p>
<p><strong>证书透明度</strong>(Certificate Transparency, CT)是证书授权机构(CA) 的一个项目，证书授权机构会将每个SSL/TLS证书发布到公共日志中。</p>
<p>一个SSL/TLS证书通常包含<strong>域名、子域名和邮件地址</strong>， 这些也经常成为攻击者非常希望获得的有用信息。查找某个域名所属证书的最简单的方法就是使用搜索引|擎搜索一些公开的CT日志</p>
<p>CT日志查询平台：</p>
<p>crt.sh: <a href="https://crt.sh" target="_blank" rel="noopener">https://crt.sh</a></p>
<p><img src="../../../../img/message/8.png" alt></p>
<p>censys: <a href="https://censys.io" target="_blank" rel="noopener">https://censys.io</a></p>
<p><img src="../../../../img/message/9.png" alt></p>
<p>myssl：<a href="https://myssl.com" target="_blank" rel="noopener">https://myssl.com</a></p>
<p><strong>DNS域传送漏洞</strong></p>
<p>一般DNS服务器会存在冗余备份，DNS服务器分为：主服务器、备份服务器和缓存服务器。主备服务器之间同步数据库的操作，就叫<strong>DNS域传送</strong></p>
<p>域传送是指备份服务器从主服务器拷贝数据，并用得到的数据更新自身数据库</p>
<p>若DNS服务器配置不当，可能导致攻击者获取某个域的所有记录。造成整个网络的拓扑结构泄露给潜在的攻击者，包括一些安全性较低的内部主机，如测试服务器</p>
<p>如何检测？</p>
<p><strong>nslookup（Windows）</strong></p>
<p>（1）nslookup -type=ns xx.yy.cn  #查询解析此域名的dns服务器</p>
<p>（2）nslookup       #进入交互式shell</p>
<p>（3）server dns.xx.yy.zz #设定查询将要使用的DNS服务器</p>
<p>（4）ls xx.yy.zz     #列出某个域中的所有域名</p>
<p>（5）exit </p>
<p><strong>dig（Linux）</strong></p>
<p>（1）dig NS xx.yy.cn #查询解析此域名的dns服务器</p>
<p>（2）dig @dns.xx.yy.cn axfr xx.yy.cn</p>
<p>@指定域名服务器；axfr为域传送指令令；xx.yy.cn表示要查询的域名</p>
<h4 id="服务器信息收集"><a href="#服务器信息收集" class="headerlink" title="服务器信息收集"></a>服务器信息收集</h4><p>首先要获得服务器真实ip</p>
<p>如果目标购买了CDN服务，可以直接ping目标的域名，但得到的并非真正的目标Web服务器，只是离我们最近的一台目标节点的CDN服务器，这就导致了我们没法直接得到目标的真实IP</p>
<p>什么是<strong>CDN</strong>？</p>
<p>CDN的全称是Content Delivery Network，即内容分发网络。其基本思路是尽可能避开互联网上有可能影响数据传输速度和稳定性的瓶颈和环节，使内容传输的更快、更稳定。</p>
<p>通过在网络各处放置节点服务器所构成的在现有的互联网基础之上的一层智能虚拟网络，CDN系统能够实时地根据网络流量和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上。</p>
<h5 id="判断目标是否存在CDN"><a href="#判断目标是否存在CDN" class="headerlink" title="判断目标是否存在CDN"></a><strong>判断目标是否存在CDN</strong></h5><p><strong>Ping目标主域</strong></p>
<p>通常通过ping目标主域，观察域名的解析情况，以此来判断其是否使用了CDN</p>
<p><img src="../../../../img/message/10.png" alt></p>
<p><strong>全国Ping</strong></p>
<p>利用全国多地区的ping服务器操作，然后对比每个地区ping出的IP结果，查看这些IP是否一致， 如果都是一样的，极有可能不存在CDN。如果IP大多不太一样或者规律性很强，可以尝试查询这些IP的归属地，判断是否存在CDN</p>
<p>在线网址：</p>
<p><a href="http://ping.chinaz.com/" target="_blank" rel="noopener">http://ping.chinaz.com/</a></p>
<p><a href="https://www.17ce.com/" target="_blank" rel="noopener">https://www.17ce.com/</a></p>
<p><a href="https://ping.aizhan.com/" target="_blank" rel="noopener">https://ping.aizhan.com/</a></p>
<p><a href="https://tools.ipip.net/newping.php" target="_blank" rel="noopener">https://tools.ipip.net/newping.php</a></p>
<p><img src="../../../../img/message/11.png" alt></p>
<p><strong>Nslookup</strong></p>
<p>不同DNS域名解析情况对比，判断其是否使用了CDN，不同DNS解析结果若不一样（若解析结果有多个），很有可能存在CDN服务</p>
<p><img src="../../../../img/message/12.png" alt></p>
<p><strong>在线工具查询</strong></p>
<p><a href="https://www.cdnplanet.com/tools/cdnfinder/" target="_blank" rel="noopener">https://www.cdnplanet.com/tools/cdnfinder/</a></p>
<p><img src="../../../../img/message/13.png" alt></p>
<h5 id="绕过CDN查找真实IP"><a href="#绕过CDN查找真实IP" class="headerlink" title="绕过CDN查找真实IP"></a>绕过CDN查找真实IP</h5><p><strong>从子域名入手</strong></p>
<p>很多网站主站的访问量会比较大，所以主站都是挂CDN的，但是分站可能没有挂CDN，可以通过ping二级域名获取分站IP， 可能会出现分站和主站不是同一个IP但在同一个C段下面的情况，从而能判断出目标的真实IP段</p>
<p><strong>利用站点功能</strong></p>
<p>一般的邮件系统都在内部，没有经过CDN的解析，通过利用目标网站的邮箱注册、找回密码或者RSS订阅等功能，查看邮件、寻找邮件头中的邮件服务器域名IP，ping这个邮件服务器的域名，就可以获得目标的真实IP</p>
<p>注意：必须是目标自己的邮件服务器，第三方或公共邮件服务器是没有用的</p>
<p><strong>利用DNS解析记录</strong></p>
<p>一般网站从部署开始到使用cdn都有一个过程，周期如果较长的话，则可以通过这类历史解析记录查询等方式获取源站ip，查看IP与域名绑定的历史记录，可能会存在使用CDN前的记录。</p>
<p>在线网站查询：</p>
<p><a href="https://www.dnsdb.io" target="_blank" rel="noopener">https://www.dnsdb.io</a></p>
<p><a href="https://viewdns.info/" target="_blank" rel="noopener">https://viewdns.info/</a></p>
<p><a href="https://x.threatbook.cn/" target="_blank" rel="noopener">https://x.threatbook.cn/</a></p>
<p><a href="https://securitytrails.com/" target="_blank" rel="noopener">https://securitytrails.com/</a></p>
<p><a href="https://sitereport.netcraft.com/" target="_blank" rel="noopener">https://sitereport.netcraft.com/</a></p>
<p><strong>国外请求</strong></p>
<p>很多时候国内的CDN对国外得覆盖面并不是很广，故此可以利用此特点进行探测。通过国外代理访问就能查看真实IP了，或者通过国外的DNS解析，可能就能得到真实的IP</p>
<p><strong>利用站点漏洞</strong></p>
<p>通过网站的信息泄露如phpinfo泄露，github信息泄露，SSRF等漏洞获取真实ip</p>
<h5 id="判断操作系统类型"><a href="#判断操作系统类型" class="headerlink" title="判断操作系统类型"></a>判断操作系统类型</h5><p>什么是<strong>Nmap</strong>？</p>
<p>Nmap是一个网络连接端扫描软件，它可以检测主机是否在线、端口开放情况、操作系统类型等信息。它是网络管理员必用的软件之一，以及用以评估网络系统安全</p>
<p><strong>Nmap</strong>：使用Nmap检测远程主机上运行的操作系统和版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -Pn -O xxx.xxx.xxx.xxx</span><br></pre></td></tr></table></figure>

<p>-Pn不检测主机存活、-O启动操作系统检测</p>
<p><strong>利用操作系统特性</strong>：windows不区分大小写，linux对大小写敏感</p>
<p><img src="../../../../img/message/15.jpg" alt></p>
<p><img src="../../../../img/message/14.jpg" alt></p>
<h5 id="探测端口开放情况"><a href="#探测端口开放情况" class="headerlink" title="探测端口开放情况"></a>探测端口开放情况</h5><p>通过扫描服务器开放的端口以及从该端口判断服务器上存在的服务，就可以对症下药，便于我们渗透目标服务器</p>
<p>常用的端口扫描工具：<strong>Nmap</strong>、<strong>Masscan</strong>、<strong>御剑高速端口扫描工具</strong></p>
<p><img src="../../../../img/message/16.jpg" alt></p>
<h5 id="探测主机服务信息"><a href="#探测主机服务信息" class="headerlink" title="探测主机服务信息"></a>探测主机服务信息</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sV -v xxx.xxx.xxx.xxx</span><br></pre></td></tr></table></figure>

<p><img src="../../../../img/message/17.png" alt></p>
<h5 id="web应用架构探测"><a href="#web应用架构探测" class="headerlink" title="web应用架构探测"></a>web应用架构探测</h5><p>当发现服务器上面运行着多个web应用站点，那我们就可以对这些网站进行信息探测，包括web中间件、服务端脚本语言、数据库、web应用开发框架、web应用指纹等等</p>
<p>通过浏览器插件：<strong>Wappalyzer</strong></p>
<p><img src="../../../../img/message/18.png" alt></p>
<p>通过第三方平台：</p>
<p>云悉  <a href="http://www.yunsee.cn/" target="_blank" rel="noopener">http://www.yunsee.cn/</a></p>
<p>TideFinger  <a href="http://finger.tidesec.net/" target="_blank" rel="noopener">http://finger.tidesec.net/</a></p>
<p>BugScaner  <a href="http://whatweb.bugscaner.com/look/" target="_blank" rel="noopener">http://whatweb.bugscaner.com/look/</a></p>
<p>数字观星   <a href="https://fp.shuziguanxing.com/#/" target="_blank" rel="noopener">https://fp.shuziguanxing.com/#/</a></p>
<p><img src="../../../../img/message/19.png" alt></p>
<h5 id="web应用敏感信息探测"><a href="#web应用敏感信息探测" class="headerlink" title="web应用敏感信息探测"></a>web应用敏感信息探测</h5><p><strong>常见源码泄露</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/.git/</span><br><span class="line">/.DS_Store（ MacOS自动生成）</span><br><span class="line">/.hg/</span><br><span class="line">/.svn/ (/.svn/entries)</span><br><span class="line">/.bzr/</span><br><span class="line">/CVS/Entries</span><br><span class="line">/CVS/Root</span><br></pre></td></tr></table></figure>

<p>源码泄露利用工具</p>
<p>.git源码泄露：<a href="https://github.com/lijiejie/GitHack" target="_blank" rel="noopener">https://github.com/lijiejie/GitHack</a></p>
<p>.DS_Store泄露：<a href="https://github.com/lijiejie/ds_store_exp" target="_blank" rel="noopener">https://github.com/lijiejie/ds_store_exp</a></p>
<p>.bzr、CVS、.svn、.hg源码泄露：<a href="https://github.com/kost/dvcs-ripper" target="_blank" rel="noopener">https://github.com/kost/dvcs-ripper</a></p>
<p><strong>备份文件泄露</strong></p>
<p>常见备份文件后缀</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.bak</span><br><span class="line">.swp</span><br><span class="line">.rar</span><br><span class="line">.zip</span><br><span class="line">.7z</span><br><span class="line">.tar.gz</span><br><span class="line">.tar</span><br><span class="line">.txt</span><br><span class="line">.html</span><br></pre></td></tr></table></figure>

<p><strong>常用的目录扫描工具</strong></p>
<p>DirMap：<a href="https://github.com/H4ckForJob/dirmap" target="_blank" rel="noopener">https://github.com/H4ckForJob/dirmap</a></p>
<p>dirsearch：<a href="https://github.com/maurosoria/dirsearch" target="_blank" rel="noopener">https://github.com/maurosoria/dirsearch</a></p>
<p>Fuzz-wfuzz：<a href="https://github.com/xmendez/wfuzz" target="_blank" rel="noopener">https://github.com/xmendez/wfuzz</a></p>
<p>dirbuster：kali自带</p>
<p>御剑后台扫描</p>
<p><strong>一些好用的字典</strong></p>
<p><a href="https://github.com/fuzzdb-project/fuzzdb" target="_blank" rel="noopener">https://github.com/fuzzdb-project/fuzzdb</a></p>
<p><a href="https://github.com/TheKingOfDuck/fuzzDicts" target="_blank" rel="noopener">https://github.com/TheKingOfDuck/fuzzDicts</a></p>
<p><a href="https://github.com/danielmiessler/SecLists" target="_blank" rel="noopener">https://github.com/danielmiessler/SecLists</a></p>
<h4 id="渗透测试工具"><a href="#渗透测试工具" class="headerlink" title="渗透测试工具"></a>渗透测试工具</h4><p>留坑</p>
<p>渗透测试主要有四个阶段，分别为信息收集、漏洞分析、渗透、后渗透</p>
<p>如果是开源的cms，可以先去查找一下公开的漏洞，如果有相应的漏洞版本，则入侵就非常容易</p>
<h5 id="漏洞扫描工具"><a href="#漏洞扫描工具" class="headerlink" title="漏洞扫描工具"></a>漏洞扫描工具</h5><p><strong>主机漏扫工具</strong>：针对目标系统上的所有主机</p>
<p><strong>网站漏扫工具</strong>：针对目标主机上的web应用</p>
<p>常见的漏洞扫描工具：</p>
<p>AppScan：网站漏扫工具</p>
<p>awvs：知名的网站漏扫工具</p>
<p>Nessus：最常用的主机漏扫工具（对个人免费，不过有扫描ip数限制）</p>
<p>WPscan：扫描wordpress漏洞</p>
<p>Sqlmap：专注于sql注入漏洞</p>
<p>XssPy：专注于xss漏洞</p>
<h5 id="渗透攻击工具"><a href="#渗透攻击工具" class="headerlink" title="渗透攻击工具"></a>渗透攻击工具</h5><p><strong>漏洞利用攻击</strong>：利用已有漏洞信息，加载渗透代码，对目标进行渗透利用</p>
<p>代表工具：kali-<strong>Metasploit</strong>（msf）</p>
<p><strong>社会工程学攻击</strong>：采用钓鱼网站、虚假邮件等方式发起社工攻击</p>
<p>代表工具：</p>
<p><strong>SET（Social-Engineer Toolkit）</strong>：社会工程学工具集。里面包含了许多用于进行社会工程学攻击的工具</p>
<p><strong>Gophish</strong>：是一个功能强大的开源网络钓鱼框架，可以轻松测试组织的网络钓鱼风险，专为企业和渗透测试人员设计</p>
<p><strong>密码攻击</strong>：利用字典/密码库/彩虹表等方式，对目标账号或密码进行破解</p>
<p>代表工具：</p>
<p><strong>Hydra</strong>：是一款开源的暴力密码破解工具，支持多种协议的破解，包括Web登录、数据库、SSH、FTP等服务，支持Linux、Windows、Mac平台安装，其中Kali Linux中自带Hydra</p>
<h5 id="后渗透攻击工具"><a href="#后渗透攻击工具" class="headerlink" title="后渗透攻击工具"></a>后渗透攻击工具</h5><p>代表工具：Metasploit</p>
<p>Metasploit中的Meterpreter模块在后渗透阶段具有强大的攻击力，包含信息收集、提权、注册表操作、令牌操纵、哈希利用、后门植入等</p>
<p>Mimikatz：能够从内存中提取出明文形式的密码，因此在内部渗透测试或者红队行动中被广泛应用</p>
<p>…..</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/渗透测试/" rel="tag"># 渗透测试</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2021/07/18/论文排版之latex使用/" rel="next" title="论文排版之latex使用">
                <i class="fa fa-chevron-left"></i> 论文排版之latex使用
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/09/14/Driftingblues3靶机渗透/" rel="prev" title="Driftingblues3靶机渗透">
                Driftingblues3靶机渗透 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Glarcy">
            
              <p class="site-author-name" itemprop="name">Glarcy</p>
              <p class="site-description motion-element" itemprop="description">web小菜鸡</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">43</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://aluvion.github.io/" title="Twings" target="_blank">Twings</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://xi4or0uji.github.io/" title="Xi4or0uji" target="_blank">Xi4or0uji</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://23r3f.github.io/" title="23R3F" target="_blank">23R3F</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://zszcr.github.io/" title="zs0zrc" target="_blank">zs0zrc</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#信息收集"><span class="nav-number">2.</span> <span class="nav-text">信息收集</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#收集域名信息"><span class="nav-number">3.</span> <span class="nav-text">收集域名信息</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Whois查询"><span class="nav-number">3.1.</span> <span class="nav-text">Whois查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#备案信息查询"><span class="nav-number">3.2.</span> <span class="nav-text">备案信息查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#子域名信息收集"><span class="nav-number">3.3.</span> <span class="nav-text">子域名信息收集</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#服务器信息收集"><span class="nav-number">4.</span> <span class="nav-text">服务器信息收集</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#判断目标是否存在CDN"><span class="nav-number">4.1.</span> <span class="nav-text">判断目标是否存在CDN</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#绕过CDN查找真实IP"><span class="nav-number">4.2.</span> <span class="nav-text">绕过CDN查找真实IP</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#判断操作系统类型"><span class="nav-number">4.3.</span> <span class="nav-text">判断操作系统类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#探测端口开放情况"><span class="nav-number">4.4.</span> <span class="nav-text">探测端口开放情况</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#探测主机服务信息"><span class="nav-number">4.5.</span> <span class="nav-text">探测主机服务信息</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#web应用架构探测"><span class="nav-number">4.6.</span> <span class="nav-text">web应用架构探测</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#web应用敏感信息探测"><span class="nav-number">4.7.</span> <span class="nav-text">web应用敏感信息探测</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#渗透测试工具"><span class="nav-number">5.</span> <span class="nav-text">渗透测试工具</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#漏洞扫描工具"><span class="nav-number">5.1.</span> <span class="nav-text">漏洞扫描工具</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#渗透攻击工具"><span class="nav-number">5.2.</span> <span class="nav-text">渗透攻击工具</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#后渗透攻击工具"><span class="nav-number">5.3.</span> <span class="nav-text">后渗透攻击工具</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Glarcy</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
